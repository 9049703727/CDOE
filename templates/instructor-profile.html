{% extends 'base.html' %}
{% load static %}
{% block title %}{{ instructor.get_display_name }} - Instructor Profile{% endblock %}
{% block content %}

<body class="instructor-profile-page">

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0">Instructor Profile</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="/">Home</a></li>
            <li><a href="{% url 'instructors_list' %}">Instructors</a></li>
            <li class="current">{{ instructor.get_display_name }}</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <!-- Instructor Profile Section -->
    <section id="instructor-profile" class="instructor-profile section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row">

          <div class="col-lg-12">
            <div class="instructor-hero-banner" data-aos="zoom-out" data-aos-delay="200">
              <div class="hero-background">
                <img src="{% static 'img/education/showcase-4.webp' %}" alt="Background" class="img-fluid">
                <div class="hero-overlay"></div>
              </div>
              <div class="hero-content">
                <div class="instructor-avatar">
                  {% if instructor.profile_image %}
                  <img src="{{ instructor.profile_image.url }}" alt="{{ instructor.get_display_name }}" class="img-fluid">
                  {% else %}
                  <img src="{% static 'img/education/teacher-7.webp' %}" alt="{{ instructor.get_display_name }}" class="img-fluid">
                  {% endif %}
                  <div class="status-badge">
                    <i class="bi bi-patch-check-fill"></i>
                    <span>Verified</span>
                  </div>
                </div>
                <div class="instructor-info">
                  <h2>{{ instructor.get_display_name }}</h2>
                  <p class="title">{{ instructor.specialization|default:"Educator" }}</p>
                  <div class="credentials">
                    {% if instructor.title %}
                    <span class="credential">{{ instructor.title }}</span>
                    {% endif %}
                    {% if instructor.years_experience > 0 %}
                    <span class="credential">{{ instructor.years_experience }}+ Years</span>
                    {% endif %}
                    <span class="credential">{{ total_students|default:"0" }} Students</span>
                  </div>
                  <div class="rating-overview">
                    <div class="stars">
                      {% with rating=avg_rating|floatformat:0 %}
                      {% for i in "12345" %}
                        {% if forloop.counter <= rating|add:0 %}
                          <i class="bi bi-star-fill"></i>
                        {% elif forloop.counter == rating|add:1 and avg_rating|floatformat:1|slice:"-1" >= "5" %}
                          <i class="bi bi-star-half"></i>
                        {% else %}
                          <i class="bi bi-star"></i>
                        {% endif %}
                      {% endfor %}
                      {% endwith %}
                    </div>
                    <span class="rating-text">{{ avg_rating|floatformat:1 }} rating from {{ courses.count }} course{{ courses.count|pluralize }}</span>
                  </div>
                  <div class="contact-actions">
                    <a href="mailto:{{ instructor.email }}" class="btn-contact">
                      <i class="bi bi-envelope"></i>
                      Contact Instructor
                    </a>
                    <div class="social-media">
                      {% if instructor.linkedin_url %}
                      <a href="{{ instructor.linkedin_url }}" target="_blank"><i class="bi bi-linkedin"></i></a>
                      {% endif %}
                      {% if instructor.twitter_url %}
                      <a href="{{ instructor.twitter_url }}" target="_blank"><i class="bi bi-twitter-x"></i></a>
                      {% endif %}
                      {% if instructor.github_url %}
                      <a href="{{ instructor.github_url }}" target="_blank"><i class="bi bi-github"></i></a>
                      {% endif %}
                      {% if instructor.facebook_url %}
                      <a href="{{ instructor.facebook_url }}" target="_blank"><i class="bi bi-facebook"></i></a>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="row gy-5 mt-4">

          <div class="col-lg-8">
            <div class="content-tabs" data-aos="fade-right" data-aos-delay="300">

              <ul class="nav nav-tabs custom-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#instructor-profile-about" type="button" role="tab">
                    <i class="bi bi-person"></i>
                    About
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#instructor-profile-courses" type="button" role="tab">
                    <i class="bi bi-book"></i>
                    Courses ({{ courses.count }})
                  </button>
                </li>
              </ul>

              <div class="tab-content custom-tab-content">

                <!-- About Tab -->
                <div class="tab-pane fade show active" id="instructor-profile-about" role="tabpanel">
                  <div class="about-content">
                    <div class="bio-section">
                      <h4>Professional Biography</h4>
                      {% if instructor.bio %}
                        <p>{{ instructor.bio|linebreaks }}</p>
                      {% else %}
                        <p>{{ instructor.short_description|default:"Experienced educator dedicated to helping students achieve their learning goals." }}</p>
                      {% endif %}
                    </div>

                    {% if instructor.specialization %}
                    <div class="expertise-grid">
                      <h4>Core Expertise</h4>
                      <div class="skills-grid">
                        <div class="skill-item">
                          <i class="bi bi-award"></i>
                          <span>{{ instructor.specialization }}</span>
                        </div>
                        {% if courses.count > 0 %}
                        {% for course in courses|slice:":5" %}
                        <div class="skill-item">
                          <i class="bi bi-book"></i>
                          <span>{{ course.category.name }}</span>
                        </div>
                        {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                    {% endif %}
                  </div>
                </div>

                <!-- Courses Tab -->
                <div class="tab-pane fade" id="instructor-profile-courses" role="tabpanel">
                  <div class="courses-grid">
                    {% for course in courses %}
                    <div class="course-item">
                      <div class="course-thumb">
                        {% if course.image %}
                        <img src="{{ course.image.url }}" alt="{{ course.title }}" class="img-fluid">
                        {% else %}
                        <img src="{% static 'img/education/courses-5.webp' %}" alt="{{ course.title }}" class="img-fluid">
                        {% endif %}
                        <div class="course-level">{{ course.get_level_display }}</div>
                      </div>
                      <div class="course-info">
                        <h5>{{ course.title }}</h5>
                        <div class="course-stats">
                          <span><i class="bi bi-people"></i> {{ course.students_enrolled }} enrolled</span>
                          <span><i class="bi bi-star-fill"></i> {{ course.rating|floatformat:1 }}</span>
                        </div>
                        {% if course.is_free %}
                        <p class="price text-success">Free</p>
                        {% else %}
                        <p class="price">â‚¹{{ course.price|floatformat:0 }}</p>
                        {% endif %}
                        <a href="{% url 'course_detail' course.slug %}" class="btn btn-sm btn-primary mt-2">View Course</a>
                      </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center py-4">
                      <p>No courses available at the moment.</p>
                    </div>
                    {% endfor %}
                  </div>
                </div>

              </div>
            </div>
          </div>

          <!-- Sidebar -->
          <div class="col-lg-4">
            <div class="sidebar-widgets" data-aos="fade-left" data-aos-delay="300">

              <!-- Stats Widget -->
              <div class="stats-widget">
                <h4>Teaching Impact</h4>
                <div class="stats-grid">
                  <div class="stat-box">
                    <div class="stat-icon">
                      <i class="bi bi-people"></i>
                    </div>
                    <div class="stat-content">
                      <h5>{{ total_students|default:"0" }}</h5>
                      <p>Total Students</p>
                    </div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-icon">
                      <i class="bi bi-book"></i>
                    </div>
                    <div class="stat-content">
                      <h5>{{ total_courses }}</h5>
                      <p>Active Courses</p>
                    </div>
                  </div>
                  <div class="stat-box">
                    <div class="stat-icon">
                      <i class="bi bi-star"></i>
                    </div>
                    <div class="stat-content">
                      <h5>{{ avg_rating|floatformat:1 }}</h5>
                      <p>Avg Rating</p>
                    </div>
                  </div>
                  {% if instructor.years_experience > 0 %}
                  <div class="stat-box">
                    <div class="stat-icon">
                      <i class="bi bi-clock"></i>
                    </div>
                    <div class="stat-content">
                      <h5>{{ instructor.years_experience }}+</h5>
                      <p>Years Teaching</p>
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>

              <!-- Contact Widget -->
              <div class="contact-widget">
                <h4>Get in Touch</h4>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="bi bi-envelope"></i>
                    <span>{{ instructor.email }}</span>
                  </div>
                  <div class="contact-item">
                    <i class="bi bi-person"></i>
                    <span>{{ instructor.get_full_name }}</span>
                  </div>
                  {% if instructor.phone %}
                  <div class="contact-item">
                    <i class="bi bi-telephone"></i>
                    <span>{{ instructor.phone }}</span>
                  </div>
                  {% endif %}
                </div>
                
                {% if instructor.linkedin_url or instructor.twitter_url or instructor.github_url or instructor.facebook_url %}
                <div class="social-links mt-3">
                  <h6>Connect on Social Media</h6>
                  <div class="d-flex gap-2 justify-content-center">
                    {% if instructor.linkedin_url %}
                    <a href="{{ instructor.linkedin_url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                      <i class="bi bi-linkedin"></i>
                    </a>
                    {% endif %}
                    {% if instructor.twitter_url %}
                    <a href="{{ instructor.twitter_url }}" target="_blank" class="btn btn-sm btn-outline-info">
                      <i class="bi bi-twitter"></i>
                    </a>
                    {% endif %}
                    {% if instructor.github_url %}
                    <a href="{{ instructor.github_url }}" target="_blank" class="btn btn-sm btn-outline-dark">
                      <i class="bi bi-github"></i>
                    </a>
                    {% endif %}
                    {% if instructor.facebook_url %}
                    <a href="{{ instructor.facebook_url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                      <i class="bi bi-facebook"></i>
                    </a>
                    {% endif %}
                  </div>
                </div>
                {% endif %}
              </div>

              <!-- All Courses Button -->
              <div class="text-center mt-4">
                <a href="{% url 'courses_list' %}" class="btn btn-primary w-100">
                  <i class="bi bi-grid"></i> Browse All Courses
                </a>
              </div>

            </div>
          </div>

        </div>

      </div>

    </section><!-- /Instructor Profile Section -->

  </main>

  
  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>
  <script src="{% static 'vendor/aos/aos.js' %}"></script>
  <script src="{% static 'vendor/purecounter/purecounter_vanilla.js' %}"></script>
  <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js' %}"></script>

</body>

{% endblock content %}